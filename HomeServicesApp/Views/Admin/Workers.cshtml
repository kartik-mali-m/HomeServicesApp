@model List<HomeServicesApp.Models.Worker>

@{
    Layout = "~/Views/Admin/_AdminLayout.cshtml";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

<style>
    .worker-card {
        border-radius: 14px;
        box-shadow: 0 10px 25px rgba(0,0,0,.05);
        overflow: hidden;
    }

    .worker-row:hover {
        background: #f9fbff;
        transition: .2s ease;
    }

    .avatar {
        width: 55px;
        height: 55px;
        object-fit: cover;
        border-radius: 50%;
        border: 2px solid #eef1f5;
    }

    .badge-soft {
        padding: 6px 14px;
        border-radius: 30px;
        font-size: 12px;
    }

    .badge-approved {
        background: #e7f9f1;
        color: #0f766e;
    }

    .badge-pending {
        background: #fff7e6;
        color: #b45309;
    }

    .btn-pill {
        border-radius: 30px;
        padding: 6px 16px;
    }

    .section-title {
        font-weight: 600;
        letter-spacing: .3px;
    }
</style>

<h3 class="section-title mb-4">👷 Worker Management</h3>

<div class="worker-card bg-white">
    <div class="table-responsive">
        <table class="table align-middle mb-0">

            <thead class="table-light">
                <tr>
                    <th>Worker</th>
                    <th>Skill</th>
                    <th>Experience</th>
                    <th>Contact</th>
                    <th>Status</th>
                    <th class="text-end">Action</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var worker in Model)
                {
                    <tr class="worker-row">

                        <!-- Worker -->
                        <td>
                            <div class="d-flex align-items-center gap-3">
                                <img class="avatar"
                                     src="@(string.IsNullOrEmpty(worker.ProfileImagePath)
                                                                               ? "/images/default-user.png"
                                                                               : worker.ProfileImagePath)" />

                            <div>
                                <div class="fw-semibold">@worker.Name</div>
                                <small class="text-muted">
                                    <i class="bi bi-envelope me-1"></i>@worker.Email
                                </small>
                            </div>
                        </div>
                    </td>

                        <!-- Skill -->
                        <td>
                            <span class="badge bg-primary-subtle text-primary badge-soft">
                                <i class="bi bi-tools me-1"></i>@worker.SkillType
                            </span>
                        </td>

                        <!-- Experience -->
                        <td>
                            <i class="bi bi-award text-success me-1"></i>
                            <strong>@worker.ExperienceYears</strong> yrs
                        </td>

                        <!-- Contact -->
                        <td>
                            <div>
                                <i class="bi bi-telephone text-info me-1"></i>
                                @worker.Phone
                            </div>
                            <small class="text-muted">
                                <i class="bi bi-geo-alt text-danger me-1"></i>
                                @worker.Address
                            </small>
                        </td>

                        <!-- Status -->
                        <td>
                        @if (worker.IsApproved)
                            {
                                <span class="badge-soft badge-approved">
                                    ✔ Approved
                                </span>
                            }
                            else
                            {
                                <span class="badge-soft badge-pending">
                                    ⏳ Pending
                                </span>
                            }
                        </td>

                        <!-- Actions -->
                        <td class="text-end">
                            @if (!worker.IsApproved)
                            {
                                <a asp-action="ApproveWorker"
                                   asp-route-id="@worker.WorkerId"
                                   class="btn btn-success btn-sm btn-pill me-2">
                                    Approve
                                </a>
                            }

                            <a asp-action="RejectWorker"
                               asp-route-id="@worker.WorkerId"
                               class="btn btn-outline-danger btn-sm btn-pill">
                                Reject
                            </a>
                        </td>

                    </tr>
                }
            </tbody>

        </table>
    </div>
</div>